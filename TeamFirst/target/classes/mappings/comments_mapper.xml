<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 2-1 dept-mapper 동적커리 수정 부서명으로 검색 manager_id로 검색 2-2 목록: location_name}, 
	manager last_name 보이도록 수정 -->

<mapper namespace="com.java.board.service.impl.CommentsMapper">

	<select id="getComments" resultType="CommentsVO"
		parameterType="CommentsVO">
		SELECT ID
		,NAME
		,CONTENT
		,BOARD_ID
		,WDATE
		FROM COMMENTS
		WHERE
		ID = #{id}
	</select>

	<select id="getSearchComments" resultType="CommentsVO"
		parameterType="CommentsVO">
		SELECT ID
		,NAME
		,CONTENT
		,BOARD_ID
		,WDATE
		FROM COMMENTS
		WHERE
		BOARD_ID = #{board_id}
	</select>

	<insert id="insertComments" statementType="CALLABLE"
		parameterType="CommentsVO">
		{call COMMENTS_INS( #{content},
		#{name},
		#{board_id},
		#{id, mode=OUT,
		jdbcType=NUMERIC, javaType=java.lang.String},
		#{out_msg, mode=OUT,
		jdbcType=VARCHAR, javaType=java.lang.String}
		) <!-- varchar2 로 안적어도 되나? -->
		}


	</insert>
	
	<update id="updateComments" parameterType="CommentsVO">
	update comments set
	
	name=#{name},
	content=#{content}
	
	where id = #{id}
	
	</update>

	<delete id="deleteComments" parameterType="CommentsVO">
	DELETE FROM COMMENTS WHERE ID
		<choose>
			<when test="ids !=null and ids.length>0">
				IN
				<!-- (1,2,3) -->
				<!-- <c:foreach items="" ==collection var="" == item(변수명) > -->
				<foreach collection="ids" item="i" open="(" separator=","
					close=")">
					#{i}
				</foreach>
			</when>
			<otherwise>
				= #{id}
			</otherwise>
		</choose>
	</delete>

</mapper>